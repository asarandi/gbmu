#include "gb.h"

/* http://gbdev.gg8.se/wiki/articles/Power_Up_Sequence */

#define boot_dmg_rom    false

unsigned char DMG_ROM_bin[] = {
  0x31, 0xfe, 0xff, 0xaf, 0x21, 0xff, 0x9f, 0x32, 0xcb, 0x7c, 0x20, 0xfb,
  0x21, 0x26, 0xff, 0x0e, 0x11, 0x3e, 0x80, 0x32, 0xe2, 0x0c, 0x3e, 0xf3,
  0xe2, 0x32, 0x3e, 0x77, 0x77, 0x3e, 0xfc, 0xe0, 0x47, 0x11, 0x04, 0x01,
  0x21, 0x10, 0x80, 0x1a, 0xcd, 0x95, 0x00, 0xcd, 0x96, 0x00, 0x13, 0x7b,
  0xfe, 0x34, 0x20, 0xf3, 0x11, 0xd8, 0x00, 0x06, 0x08, 0x1a, 0x13, 0x22,
  0x23, 0x05, 0x20, 0xf9, 0x3e, 0x19, 0xea, 0x10, 0x99, 0x21, 0x2f, 0x99,
  0x0e, 0x0c, 0x3d, 0x28, 0x08, 0x32, 0x0d, 0x20, 0xf9, 0x2e, 0x0f, 0x18,
  0xf3, 0x67, 0x3e, 0x64, 0x57, 0xe0, 0x42, 0x3e, 0x91, 0xe0, 0x40, 0x04,
  0x1e, 0x02, 0x0e, 0x0c, 0xf0, 0x44, 0xfe, 0x90, 0x20, 0xfa, 0x0d, 0x20,
  0xf7, 0x1d, 0x20, 0xf2, 0x0e, 0x13, 0x24, 0x7c, 0x1e, 0x83, 0xfe, 0x62,
  0x28, 0x06, 0x1e, 0xc1, 0xfe, 0x64, 0x20, 0x06, 0x7b, 0xe2, 0x0c, 0x3e,
  0x87, 0xe2, 0xf0, 0x42, 0x90, 0xe0, 0x42, 0x15, 0x20, 0xd2, 0x05, 0x20,
  0x4f, 0x16, 0x20, 0x18, 0xcb, 0x4f, 0x06, 0x04, 0xc5, 0xcb, 0x11, 0x17,
  0xc1, 0xcb, 0x11, 0x17, 0x05, 0x20, 0xf5, 0x22, 0x23, 0x22, 0x23, 0xc9,
  0xce, 0xed, 0x66, 0x66, 0xcc, 0x0d, 0x00, 0x0b, 0x03, 0x73, 0x00, 0x83,
  0x00, 0x0c, 0x00, 0x0d, 0x00, 0x08, 0x11, 0x1f, 0x88, 0x89, 0x00, 0x0e,
  0xdc, 0xcc, 0x6e, 0xe6, 0xdd, 0xdd, 0xd9, 0x99, 0xbb, 0xbb, 0x67, 0x63,
  0x6e, 0x0e, 0xec, 0xcc, 0xdd, 0xdc, 0x99, 0x9f, 0xbb, 0xb9, 0x33, 0x3e,
  0x3c, 0x42, 0xb9, 0xa5, 0xb9, 0xa5, 0x42, 0x3c, 0x21, 0x04, 0x01, 0x11,
  0xa8, 0x00, 0x1a, 0x13, 0xbe, 0x20, 0xfe, 0x23, 0x7d, 0xfe, 0x34, 0x20,
  0xf5, 0x06, 0x19, 0x78, 0x86, 0x23, 0x05, 0x20, 0xfb, 0x86, 0x20, 0xfe,
  0x3e, 0x01, 0xe0, 0x50
};
unsigned int DMG_ROM_bin_len = 256;

void    set_initial_register_values()
{
    t_r16   *r16    = state->gameboy_registers;
    uint8_t *gb_mem = state->gameboy_memory;

    r16->AF = 0x01B0;
    r16->BC = 0x0013;
    r16->DE = 0x00D8;
    r16->HL = 0x014D;
    r16->SP = 0xFFFE;
    r16->PC = 0x0100;

    gb_mem[0xFF05] = 0x00;  //   ; TIMA
    gb_mem[0xFF06] = 0x00;  //   ; TMA
    gb_mem[0xFF07] = 0x00;  //   ; TAC
    gb_mem[0xFF10] = 0x80;  //   ; NR10
    gb_mem[0xFF11] = 0xBF;  //   ; NR11
    gb_mem[0xFF12] = 0xF3;  //   ; NR12
    gb_mem[0xFF14] = 0xBF;  //   ; NR14
    gb_mem[0xFF16] = 0x3F;  //   ; NR21
    gb_mem[0xFF17] = 0x00;  //   ; NR22
    gb_mem[0xFF19] = 0xBF;  //   ; NR24
    gb_mem[0xFF1A] = 0x7F;  //   ; NR30
    gb_mem[0xFF1B] = 0xFF;  //   ; NR31
    gb_mem[0xFF1C] = 0x9F;  //   ; NR32
    gb_mem[0xFF1E] = 0xBF;  //   ; NR33
    gb_mem[0xFF20] = 0xFF;  //   ; NR41
    gb_mem[0xFF21] = 0x00;  //   ; NR42
    gb_mem[0xFF22] = 0x00;  //   ; NR43
    gb_mem[0xFF23] = 0xBF;  //   ; NR44
    gb_mem[0xFF24] = 0x77;  //   ; NR50
    gb_mem[0xFF25] = 0xF3;  //   ; NR51
    gb_mem[0xFF26] = 0xF1;  //-GB, 0xF0-SGB ; NR52
    gb_mem[0xFF40] = 0x91;  //   ; LCDC
    gb_mem[0xFF42] = 0x00;  //   ; SCY
    gb_mem[0xFF43] = 0x00;  //   ; SCX
    gb_mem[0xFF45] = 0x00;  //   ; LYC
    gb_mem[0xFF47] = 0xFC;  //   ; BGP
    gb_mem[0xFF48] = 0xFF;  //   ; OBP0
    gb_mem[0xFF49] = 0xFF;  //   ; OBP1
    gb_mem[0xFF4A] = 0x00;  //   ; WY
    gb_mem[0xFF4B] = 0x00;  //   ; WX
    gb_mem[0xFFFF] = 0x00;  //   ; IE
}
